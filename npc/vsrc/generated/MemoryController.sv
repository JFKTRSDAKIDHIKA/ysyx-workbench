// Generated by CIRCT firtool-1.62.0
module MemoryController(
  input  [31:0] io_dmem_addr,
  input  [31:0] io_dmem_wdata_raw,
  input  [2:0]  io_control,
  output [7:0]  io_wmask,
  output [31:0] io_dmem_wdata,
  output [2:0]  io_dmem_rw_size
);

  wire [7:0]  _base_mask_T_1 = io_control == 3'h2 ? 8'hF : 8'h0;
  wire        _io_dmem_rw_size_T_16 = io_control == 3'h1;
  wire [7:0]  _base_mask_T_3 = _io_dmem_rw_size_T_16 ? 8'h3 : _base_mask_T_1;
  wire        _io_dmem_rw_size_T_12 = io_control == 3'h0;
  wire [7:0]  base_mask = _io_dmem_rw_size_T_12 ? 8'h1 : _base_mask_T_3;
  wire [2:0]  _rw_address_type_T_18 =
    io_dmem_addr > 32'h9FFFFFFF & io_dmem_addr[31:30] != 2'h3 ? 3'h5 : 3'h6;
  wire [2:0]  _rw_address_type_T_19 =
    io_dmem_addr[31] & io_dmem_addr < 32'hA0000000 ? 3'h4 : _rw_address_type_T_18;
  wire [2:0]  _rw_address_type_T_20 =
    io_dmem_addr > 32'h10000FFF & io_dmem_addr < 32'h10002000
      ? 3'h3
      : _rw_address_type_T_19;
  wire [2:0]  _rw_address_type_T_21 =
    io_dmem_addr > 32'h2FFFFFFF & io_dmem_addr < 32'h40000000
      ? 3'h2
      : _rw_address_type_T_20;
  wire [2:0]  _rw_address_type_T_22 =
    io_dmem_addr > 32'hEFFFFFF & io_dmem_addr < 32'h10000000
      ? 3'h1
      : _rw_address_type_T_21;
  wire [2:0]  rw_address_type =
    (|(io_dmem_addr[31:28])) & io_dmem_addr < 32'h10001000 ? 3'h0 : _rw_address_type_T_22;
  wire [14:0] _GEN = {7'h0, base_mask};
  wire [14:0] _GEN_0 = {13'h0, io_dmem_addr[1:0]};
  wire [14:0] _io_wmask_T_1 = _GEN << _GEN_0;
  wire [14:0] _io_wmask_T_3 = _GEN << _GEN_0;
  wire [14:0] _io_wmask_T_5 = _GEN << _GEN_0;
  wire [14:0] _io_wmask_T_7 = _GEN << _GEN_0;
  wire        _io_dmem_rw_size_T_22 = rw_address_type == 3'h1;
  wire [7:0]  _io_wmask_T_11 = _io_dmem_rw_size_T_22 ? _io_wmask_T_1[7:0] : 8'h1;
  wire        _io_dmem_rw_size_T_26 = rw_address_type == 3'h3;
  wire [7:0]  _io_wmask_T_13 =
    _io_dmem_rw_size_T_26 ? _io_wmask_T_3[7:0] : _io_wmask_T_11;
  wire [7:0]  _io_wmask_T_15 =
    rw_address_type == 3'h4 ? _io_wmask_T_5[7:0] : _io_wmask_T_13;
  reg  [94:0] casez_tmp;
  wire [94:0] _GEN_1 = {63'h0, io_dmem_wdata_raw};
  wire [94:0] _GEN_2 = {90'h0, io_dmem_addr[1:0], 3'h0};
  wire [94:0] _io_dmem_wdata_T_1 = _GEN_1 << _GEN_2;
  always @(*) begin
    casez (rw_address_type)
      3'b000:
        casez_tmp = _GEN_1;
      3'b001:
        casez_tmp = _GEN_1 << _GEN_2;
      3'b010:
        casez_tmp = _io_dmem_wdata_T_1;
      3'b011:
        casez_tmp = _GEN_1 << _GEN_2;
      3'b100:
        casez_tmp = _GEN_1 << _GEN_2;
      3'b101:
        casez_tmp = _GEN_1 << _GEN_2;
      3'b110:
        casez_tmp = _io_dmem_wdata_T_1;
      default:
        casez_tmp = _io_dmem_wdata_T_1;
    endcase
  end // always @(*)
  reg  [2:0]  casez_tmp_0;
  wire        _GEN_3 = io_control == 3'h4 | _io_dmem_rw_size_T_12;
  wire        _GEN_4 = io_control == 3'h5 | _io_dmem_rw_size_T_16;
  wire [2:0]  _io_dmem_rw_size_T_9 = _GEN_4 ? 3'h1 : {1'h0, ~_GEN_3, 1'h0};
  wire [2:0]  _io_dmem_rw_size_T_27 =
    _io_dmem_rw_size_T_26 | rw_address_type == 3'h2 | _io_dmem_rw_size_T_22
    | (|rw_address_type)
      ? 3'h2
      : _io_dmem_rw_size_T_9;
  always @(*) begin
    casez (rw_address_type)
      3'b000:
        casez_tmp_0 = _io_dmem_rw_size_T_27;
      3'b001:
        casez_tmp_0 = 3'h2;
      3'b010:
        casez_tmp_0 = 3'h2;
      3'b011:
        casez_tmp_0 = 3'h2;
      3'b100:
        casez_tmp_0 = _GEN_4 ? 3'h1 : {1'h0, ~_GEN_3, 1'h0};
      3'b101:
        casez_tmp_0 = 3'h2;
      3'b110:
        casez_tmp_0 = _io_dmem_rw_size_T_27;
      default:
        casez_tmp_0 = _io_dmem_rw_size_T_27;
    endcase
  end // always @(*)
  assign io_wmask = rw_address_type == 3'h5 ? _io_wmask_T_7[7:0] : _io_wmask_T_15;
  assign io_dmem_wdata = casez_tmp[31:0];
  assign io_dmem_rw_size = casez_tmp_0;
endmodule

