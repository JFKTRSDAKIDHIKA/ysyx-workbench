// Generated by CIRCT firtool-1.62.0
module WBU(	// src/main/scala/npc/wbu.scala:29:7
  input         clock,	// src/main/scala/npc/wbu.scala:29:7
                reset,	// src/main/scala/npc/wbu.scala:29:7
  output        io_in_ready,	// src/main/scala/npc/wbu.scala:30:14
  input         io_in_valid,	// src/main/scala/npc/wbu.scala:30:14
  input  [31:0] io_in_bits_inst,	// src/main/scala/npc/wbu.scala:30:14
                io_in_bits_pc,	// src/main/scala/npc/wbu.scala:30:14
                io_in_bits_dmem_rdata,	// src/main/scala/npc/wbu.scala:30:14
                io_in_bits_result,	// src/main/scala/npc/wbu.scala:30:14
  input  [4:0]  io_in_bits_wb_addr,	// src/main/scala/npc/wbu.scala:30:14
  output [31:0] io_wb_data,	// src/main/scala/npc/wbu.scala:30:14
  output [4:0]  io_wb_addr,	// src/main/scala/npc/wbu.scala:30:14
  output        io_wb_wen,	// src/main/scala/npc/wbu.scala:30:14
                io_pc_wen,	// src/main/scala/npc/wbu.scala:30:14
  output [1:0]  io_wbu_state_debug,	// src/main/scala/npc/wbu.scala:30:14
  output [31:0] io_wb_data_debug,	// src/main/scala/npc/wbu.scala:30:14
  output        io_wb_wen_debug,	// src/main/scala/npc/wbu.scala:30:14
  output [1:0]  io_wb_sel_debug,	// src/main/scala/npc/wbu.scala:30:14
  output [31:0] io_wbu_reg_dmem_rdata_debug	// src/main/scala/npc/wbu.scala:30:14
);

  reg  [1:0]       state;	// src/main/scala/npc/wbu.scala:41:22
  wire             io_in_ready_0 = state == 2'h0 & io_in_valid;	// src/main/scala/npc/wbu.scala:41:22, :44:17, :47:25
  reg  [31:0]      wbu_reg_inst;	// src/main/scala/npc/wbu.scala:65:31
  reg  [31:0]      wbu_reg_pc;	// src/main/scala/npc/wbu.scala:66:29
  reg  [31:0]      wbu_reg_result;	// src/main/scala/npc/wbu.scala:67:33
  reg  [31:0]      wbu_reg_dmem_rdata;	// src/main/scala/npc/wbu.scala:68:37
  reg  [4:0]       wbu_reg_wb_addr;	// src/main/scala/npc/wbu.scala:69:34
  wire             _wb_wen_T_1 = wbu_reg_inst[6:0] == 7'h37;	// src/main/scala/npc/wbu.scala:65:31, :72:28, :81:36
  wire             _wb_wen_T_2 = wbu_reg_inst[6:0] == 7'h17;	// src/main/scala/npc/wbu.scala:65:31, :72:28, :81:36
  wire             _wb_wen_T_4 = wbu_reg_inst[6:0] == 7'h33;	// src/main/scala/npc/wbu.scala:65:31, :72:28, :81:36
  wire             _wb_wen_T_6 = wbu_reg_inst[6:0] == 7'h13;	// src/main/scala/npc/wbu.scala:65:31, :72:28, :81:36
  wire             _wb_wen_T_8 = wbu_reg_inst[6:0] == 7'h3;	// src/main/scala/npc/wbu.scala:65:31, :72:28, :81:36
  wire             _wb_wen_T_10 = wbu_reg_inst[6:0] == 7'h6F;	// src/main/scala/npc/wbu.scala:65:31, :72:28, :81:36
  wire             _wb_wen_T_12 = wbu_reg_inst[6:0] == 7'h67;	// src/main/scala/npc/wbu.scala:65:31, :72:28, :81:36
  wire [1:0]       wb_sel =
    _wb_wen_T_12 | _wb_wen_T_10
      ? 2'h1
      : wbu_reg_inst[6:0] == 7'h73 | wbu_reg_inst[6:0] == 7'h63
          ? 2'h0
          : _wb_wen_T_8
              ? 2'h3
              : {_wb_wen_T_6 | _wb_wen_T_4 | _wb_wen_T_2 | _wb_wen_T_1, 1'h0};	// src/main/scala/npc/wbu.scala:41:22, :49:15, :65:31, :72:28, :81:36
  wire [3:0][31:0] _GEN =
    {{wbu_reg_dmem_rdata}, {wbu_reg_result}, {wbu_reg_pc + 32'h4}, {32'h0}};	// src/main/scala/npc/wbu.scala:66:29, :67:33, :68:37, :77:29, :95:37
  wire             io_wb_wen_0 =
    (_wb_wen_T_12 | _wb_wen_T_10 | _wb_wen_T_8 | _wb_wen_T_6 | _wb_wen_T_4 | _wb_wen_T_2
     | _wb_wen_T_1) & state == 2'h1;	// src/main/scala/npc/wbu.scala:41:22, :49:15, :81:36, :104:39, :117:{23,33}
  always @(posedge clock) begin	// src/main/scala/npc/wbu.scala:29:7
    if (reset)	// src/main/scala/npc/wbu.scala:29:7
      state <= 2'h0;	// src/main/scala/npc/wbu.scala:41:22
    else begin	// src/main/scala/npc/wbu.scala:29:7
      automatic logic [3:0][1:0] _GEN_0 =
        {{state}, {2'h0}, {2'h2}, {io_in_valid ? 2'h1 : state}};	// src/main/scala/npc/wbu.scala:41:22, :44:17, :47:25, :49:15, :55:13, :60:13
      state <= _GEN_0[state];	// src/main/scala/npc/wbu.scala:41:22, :44:17, :47:25, :55:13, :60:13
    end
    if (io_in_ready_0 & io_in_valid) begin	// src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/npc/wbu.scala:44:17, :47:25
      wbu_reg_inst <= io_in_bits_inst;	// src/main/scala/npc/wbu.scala:65:31
      wbu_reg_pc <= io_in_bits_pc;	// src/main/scala/npc/wbu.scala:66:29
      wbu_reg_result <= io_in_bits_result;	// src/main/scala/npc/wbu.scala:67:33
      wbu_reg_dmem_rdata <= io_in_bits_dmem_rdata;	// src/main/scala/npc/wbu.scala:68:37
      wbu_reg_wb_addr <= io_in_bits_wb_addr;	// src/main/scala/npc/wbu.scala:69:34
    end
  end // always @(posedge)
  assign io_in_ready = io_in_ready_0;	// src/main/scala/npc/wbu.scala:29:7, :44:17, :47:25
  assign io_wb_data = _GEN[wb_sel];	// src/main/scala/npc/wbu.scala:29:7, :81:36, :95:37
  assign io_wb_addr = wbu_reg_wb_addr;	// src/main/scala/npc/wbu.scala:29:7, :69:34
  assign io_wb_wen = io_wb_wen_0;	// src/main/scala/npc/wbu.scala:29:7, :117:23
  assign io_pc_wen = state == 2'h2;	// src/main/scala/npc/wbu.scala:29:7, :41:22, :55:13, :118:23
  assign io_wbu_state_debug = state;	// src/main/scala/npc/wbu.scala:29:7, :41:22
  assign io_wb_data_debug = _GEN[wb_sel];	// src/main/scala/npc/wbu.scala:29:7, :81:36, :95:37
  assign io_wb_wen_debug = io_wb_wen_0;	// src/main/scala/npc/wbu.scala:29:7, :117:23
  assign io_wb_sel_debug = wb_sel;	// src/main/scala/npc/wbu.scala:29:7, :81:36
  assign io_wbu_reg_dmem_rdata_debug = wbu_reg_dmem_rdata;	// src/main/scala/npc/wbu.scala:29:7, :68:37
endmodule

