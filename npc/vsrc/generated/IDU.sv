// Generated by CIRCT firtool-1.62.0
module IDU(	// src/main/scala/npc/idu.scala:35:7
  input         clock,	// src/main/scala/npc/idu.scala:35:7
                reset,	// src/main/scala/npc/idu.scala:35:7
  output        io_in_ready,	// src/main/scala/npc/idu.scala:36:16
  input         io_in_valid,	// src/main/scala/npc/idu.scala:36:16
  input  [31:0] io_in_bits_inst,	// src/main/scala/npc/idu.scala:36:16
                io_in_bits_pc,	// src/main/scala/npc/idu.scala:36:16
  input         io_out_ready,	// src/main/scala/npc/idu.scala:36:16
  output        io_out_valid,	// src/main/scala/npc/idu.scala:36:16
  output [31:0] io_out_bits_inst,	// src/main/scala/npc/idu.scala:36:16
                io_out_bits_pc,	// src/main/scala/npc/idu.scala:36:16
  output [4:0]  io_out_bits_wb_addr,	// src/main/scala/npc/idu.scala:36:16
  output [31:0] io_out_bits_alu_op1,	// src/main/scala/npc/idu.scala:36:16
                io_out_bits_alu_op2,	// src/main/scala/npc/idu.scala:36:16
                io_out_bits_rs2_data,	// src/main/scala/npc/idu.scala:36:16
                io_jump_reg_target,	// src/main/scala/npc/idu.scala:36:16
                io_br_target,	// src/main/scala/npc/idu.scala:36:16
                io_jmp_target,	// src/main/scala/npc/idu.scala:36:16
  output [2:0]  io_pc_sel,	// src/main/scala/npc/idu.scala:36:16
  input  [31:0] io_rs1_data,	// src/main/scala/npc/idu.scala:36:16
                io_rs2_data,	// src/main/scala/npc/idu.scala:36:16
  output [4:0]  io_rs1_addr,	// src/main/scala/npc/idu.scala:36:16
                io_rs2_addr	// src/main/scala/npc/idu.scala:36:16
);

  reg  [31:0]      idu_reg_inst;	// src/main/scala/npc/idu.scala:39:33
  reg  [31:0]      idu_reg_pc;	// src/main/scala/npc/idu.scala:40:31
  reg  [1:0]       state;	// src/main/scala/npc/idu.scala:48:24
  wire             _GEN = state == 2'h0;	// src/main/scala/npc/idu.scala:48:24, :51:19
  wire             _GEN_0 = state == 2'h1;	// src/main/scala/npc/idu.scala:48:24, :51:19, :56:17
  wire             _GEN_1 = state == 2'h2;	// src/main/scala/npc/idu.scala:48:24, :51:19, :63:17
  wire             io_in_ready_0 = _GEN & io_in_valid;	// src/main/scala/npc/idu.scala:51:19, :54:27
  wire [19:0]      _imm_i_sext_T_1 = {20{idu_reg_inst[31]}};	// src/main/scala/npc/idu.scala:39:33, :81:29, :88:{30,39}
  wire             br_eq = io_rs1_data == io_rs2_data;	// src/main/scala/npc/idu.scala:104:29
  wire             br_lt = $signed(io_rs1_data) < $signed(io_rs2_data);	// src/main/scala/npc/idu.scala:105:36
  wire             br_ltu = io_rs1_data < io_rs2_data;	// src/main/scala/npc/idu.scala:106:37
  wire             _branch_taken_T_4 = idu_reg_inst[14:12] == 3'h0 & br_eq;	// src/main/scala/npc/idu.scala:39:33, :101:30, :104:29, :109:50
  wire [7:0]       _GEN_2 =
    {{~br_ltu},
     {br_ltu},
     {~br_lt},
     {br_lt},
     {_branch_taken_T_4},
     {_branch_taken_T_4},
     {~br_eq},
     {_branch_taken_T_4}};	// src/main/scala/npc/idu.scala:104:29, :105:36, :106:37, :109:50, :111:23, :113:23, :115:24
  wire             _alu_op2Sel_T_4 = idu_reg_inst[6:0] == 7'h67;	// src/main/scala/npc/idu.scala:39:33, :100:30, :119:41
  wire             _alu_op2Sel_T_6 = idu_reg_inst[6:0] == 7'h6F;	// src/main/scala/npc/idu.scala:39:33, :100:30, :119:41
  wire             _alu_op2Sel_T_8 = idu_reg_inst[6:0] == 7'h63;	// src/main/scala/npc/idu.scala:39:33, :100:30, :119:41
  wire             _alu_op2Sel_T_11 = idu_reg_inst[6:0] == 7'h3;	// src/main/scala/npc/idu.scala:39:33, :100:30, :129:41
  wire             _alu_op2Sel_T_12 = idu_reg_inst[6:0] == 7'h23;	// src/main/scala/npc/idu.scala:39:33, :100:30, :129:41
  wire             _alu_op2Sel_T_14 = idu_reg_inst[6:0] == 7'h33;	// src/main/scala/npc/idu.scala:39:33, :100:30, :129:41
  wire             _alu_op2Sel_T_16 = idu_reg_inst[6:0] == 7'h13;	// src/main/scala/npc/idu.scala:39:33, :100:30, :129:41
  wire [3:0][31:0] _GEN_3 =
    {{io_rs2_data},
     {{{20{idu_reg_inst[31]}}, idu_reg_inst[31:25], idu_reg_inst[11:7]}},
     {{_imm_i_sext_T_1, idu_reg_inst[31:20]}},
     {idu_reg_pc}};	// src/main/scala/npc/idu.scala:39:33, :40:31, :76:32, :81:29, :82:33, :88:{25,30}, :89:{25,30,39}, :159:45
  always @(posedge clock) begin	// src/main/scala/npc/idu.scala:35:7
    if (io_in_ready_0 & io_in_valid) begin	// src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/npc/idu.scala:51:19, :54:27
      idu_reg_inst <= io_in_bits_inst;	// src/main/scala/npc/idu.scala:39:33
      idu_reg_pc <= io_in_bits_pc;	// src/main/scala/npc/idu.scala:40:31
    end
    if (reset)	// src/main/scala/npc/idu.scala:35:7
      state <= 2'h0;	// src/main/scala/npc/idu.scala:48:24
    else if (_GEN) begin	// src/main/scala/npc/idu.scala:51:19
      if (io_in_valid)	// src/main/scala/npc/idu.scala:36:16
        state <= 2'h1;	// src/main/scala/npc/idu.scala:48:24, :56:17
    end
    else if (_GEN_0)	// src/main/scala/npc/idu.scala:51:19
      state <= 2'h2;	// src/main/scala/npc/idu.scala:48:24, :63:17
    else if (_GEN_1 & io_out_ready)	// src/main/scala/npc/idu.scala:48:24, :51:19, :69:30, :70:19
      state <= 2'h0;	// src/main/scala/npc/idu.scala:48:24
  end // always @(posedge)
  assign io_in_ready = io_in_ready_0;	// src/main/scala/npc/idu.scala:35:7, :51:19, :54:27
  assign io_out_valid = ~(_GEN | _GEN_0) & _GEN_1;	// src/main/scala/npc/idu.scala:35:7, :51:19, :53:22, :62:24
  assign io_out_bits_inst = idu_reg_inst;	// src/main/scala/npc/idu.scala:35:7, :39:33
  assign io_out_bits_pc = idu_reg_pc;	// src/main/scala/npc/idu.scala:35:7, :40:31
  assign io_out_bits_wb_addr = idu_reg_inst[11:7];	// src/main/scala/npc/idu.scala:35:7, :39:33, :76:32
  assign io_out_bits_alu_op1 =
    ~(_alu_op2Sel_T_16 | _alu_op2Sel_T_14 | _alu_op2Sel_T_12 | _alu_op2Sel_T_11
      | _alu_op2Sel_T_8 | _alu_op2Sel_T_6 | _alu_op2Sel_T_4)
    & (idu_reg_inst[6:0] == 7'h17 | idu_reg_inst[6:0] == 7'h37)
      ? {idu_reg_inst[31:12], 12'h0}
      : io_rs1_data;	// src/main/scala/npc/idu.scala:35:7, :39:33, :84:29, :91:{25,37}, :100:30, :119:41, :129:41, :154:45
  assign io_out_bits_alu_op2 =
    _GEN_3[_alu_op2Sel_T_16
             ? 2'h1
             : _alu_op2Sel_T_14
                 ? 2'h3
                 : _alu_op2Sel_T_12 ? 2'h2 : {1'h0, _alu_op2Sel_T_11}];	// src/main/scala/npc/idu.scala:35:7, :43:17, :56:17, :63:17, :129:41, :141:41, :159:45
  assign io_out_bits_rs2_data = io_rs2_data;	// src/main/scala/npc/idu.scala:35:7
  assign io_jump_reg_target =
    io_rs1_data + {_imm_i_sext_T_1, idu_reg_inst[31:20]} & 32'hFFFFFFFE;	// src/main/scala/npc/idu.scala:35:7, :39:33, :81:29, :88:30, :95:{47,68,70}
  assign io_br_target =
    idu_reg_pc
    + {{20{idu_reg_inst[31]}},
       idu_reg_inst[7],
       idu_reg_inst[30:25],
       idu_reg_inst[11:8],
       1'h0};	// src/main/scala/npc/idu.scala:35:7, :39:33, :40:31, :43:17, :83:{33,51,68,90}, :90:25, :96:32
  assign io_jmp_target =
    idu_reg_pc
    + {{12{idu_reg_inst[31]}},
       idu_reg_inst[19:12],
       idu_reg_inst[20],
       idu_reg_inst[30:21],
       1'h0};	// src/main/scala/npc/idu.scala:35:7, :39:33, :40:31, :43:17, :83:33, :85:{51,73,91}, :92:25, :97:33
  assign io_pc_sel =
    _alu_op2Sel_T_8
      ? {2'h0, _GEN_2[idu_reg_inst[14:12]]}
      : _alu_op2Sel_T_6 ? 3'h2 : _alu_op2Sel_T_4 ? 3'h3 : 3'h0;	// src/main/scala/npc/idu.scala:35:7, :39:33, :48:24, :101:30, :109:50, :119:41, :122:29
  assign io_rs1_addr = idu_reg_inst[19:15];	// src/main/scala/npc/idu.scala:35:7, :39:33, :77:32
  assign io_rs2_addr = idu_reg_inst[24:20];	// src/main/scala/npc/idu.scala:35:7, :39:33, :78:32
endmodule

