// Generated by CIRCT firtool-1.62.0
module IFU(	// src/main/scala/npc/ifu.scala:9:7
  input         clock,	// src/main/scala/npc/ifu.scala:9:7
                reset,	// src/main/scala/npc/ifu.scala:9:7
                io_out_ready,	// src/main/scala/npc/ifu.scala:10:14
  output        io_out_valid,	// src/main/scala/npc/ifu.scala:10:14
  output [31:0] io_out_bits_inst,	// src/main/scala/npc/ifu.scala:10:14
                io_out_bits_pc,	// src/main/scala/npc/ifu.scala:10:14
  input  [2:0]  io_pc_sel,	// src/main/scala/npc/ifu.scala:10:14
  input  [31:0] io_jump_reg_target,	// src/main/scala/npc/ifu.scala:10:14
                io_br_target,	// src/main/scala/npc/ifu.scala:10:14
                io_jmp_target,	// src/main/scala/npc/ifu.scala:10:14
  input         io_pc_wen,	// src/main/scala/npc/ifu.scala:10:14
                io_lsu_axi_resp_err,	// src/main/scala/npc/ifu.scala:10:14
  output [31:0] io_memory_ar_addr,	// src/main/scala/npc/ifu.scala:10:14
  output        io_memory_ar_valid,	// src/main/scala/npc/ifu.scala:10:14
  input         io_memory_ar_ready,	// src/main/scala/npc/ifu.scala:10:14
  input  [31:0] io_memory_r_data,	// src/main/scala/npc/ifu.scala:10:14
  input         io_memory_r_valid,	// src/main/scala/npc/ifu.scala:10:14
  output        io_memory_r_ready,	// src/main/scala/npc/ifu.scala:10:14
                io_arbiter_valid,	// src/main/scala/npc/ifu.scala:10:14
  input         io_arbiter_ready,	// src/main/scala/npc/ifu.scala:10:14
  output [31:0] io_pc_debug,	// src/main/scala/npc/ifu.scala:10:14
                io_inst_debug,	// src/main/scala/npc/ifu.scala:10:14
  output [2:0]  io_ifu_state_debug	// src/main/scala/npc/ifu.scala:10:14
);

  reg  [31:0] pc;	// src/main/scala/npc/ifu.scala:47:19
  reg  [31:0] if_inst_buffer;	// src/main/scala/npc/ifu.scala:48:31
  reg  [2:0]  state;	// src/main/scala/npc/ifu.scala:77:22
  wire        _GEN = state == 3'h0;	// src/main/scala/npc/ifu.scala:54:44, :77:22, :80:17
  wire        _GEN_0 = state == 3'h2;	// src/main/scala/npc/ifu.scala:54:44, :77:22, :80:17
  wire        _GEN_1 = state == 3'h1;	// src/main/scala/npc/ifu.scala:54:44, :77:22, :80:17
  wire        _GEN_2 = state == 3'h3;	// src/main/scala/npc/ifu.scala:54:44, :77:22, :80:17
  wire        _GEN_3 = _GEN_0 | _GEN_1;	// src/main/scala/npc/ifu.scala:48:31, :80:17
  wire        _GEN_4 = _GEN | _GEN_3;	// src/main/scala/npc/ifu.scala:48:31, :80:17
  wire        _GEN_5 = state == 3'h4;	// src/main/scala/npc/ifu.scala:50:21, :77:22, :80:17
  wire        _GEN_6 = _GEN | ~(_GEN_0 | ~(_GEN_1 | _GEN_2 | _GEN_5));	// src/main/scala/npc/ifu.scala:43:20, :80:17, :86:24, :116:24, :137:24, :159:24
  wire [31:0] io_inst_debug_0 = _GEN_6 ? if_inst_buffer : 32'h0;	// src/main/scala/npc/ifu.scala:48:31, :80:17, :86:24
  always @(posedge clock) begin	// src/main/scala/npc/ifu.scala:9:7
    if (reset) begin	// src/main/scala/npc/ifu.scala:9:7
      pc <= 32'h30000000;	// src/main/scala/npc/ifu.scala:47:19
      if_inst_buffer <= 32'h0;	// src/main/scala/npc/ifu.scala:48:31
      state <= 3'h1;	// src/main/scala/npc/ifu.scala:54:44, :77:22
    end
    else begin	// src/main/scala/npc/ifu.scala:9:7
      if (io_pc_wen) begin	// src/main/scala/npc/ifu.scala:10:14
        if (io_pc_sel == 3'h4)	// src/main/scala/npc/ifu.scala:50:21, :54:44
          pc <= 32'h0;	// src/main/scala/npc/ifu.scala:47:19, :48:31
        else if (io_pc_sel == 3'h2)	// src/main/scala/npc/ifu.scala:54:44
          pc <= io_jmp_target;	// src/main/scala/npc/ifu.scala:47:19
        else if (io_pc_sel == 3'h1)	// src/main/scala/npc/ifu.scala:54:44
          pc <= io_br_target;	// src/main/scala/npc/ifu.scala:47:19
        else if (io_pc_sel == 3'h3)	// src/main/scala/npc/ifu.scala:54:44
          pc <= io_jump_reg_target;	// src/main/scala/npc/ifu.scala:47:19
        else	// src/main/scala/npc/ifu.scala:54:44
          pc <= pc + 32'h4;	// src/main/scala/npc/ifu.scala:47:19, :50:21
      end
      if (_GEN_4 | ~(_GEN_2 & io_memory_r_valid)) begin	// src/main/scala/npc/ifu.scala:48:31, :80:17, :148:31, :149:24
      end
      else	// src/main/scala/npc/ifu.scala:48:31, :80:17
        if_inst_buffer <= io_memory_r_data;	// src/main/scala/npc/ifu.scala:48:31
      if (_GEN) begin	// src/main/scala/npc/ifu.scala:80:17
        if (io_pc_wen)	// src/main/scala/npc/ifu.scala:10:14
          state <= 3'h2;	// src/main/scala/npc/ifu.scala:54:44, :77:22
      end
      else if (_GEN_0) begin	// src/main/scala/npc/ifu.scala:80:17
        if (io_arbiter_ready)	// src/main/scala/npc/ifu.scala:10:14
          state <= 3'h1;	// src/main/scala/npc/ifu.scala:54:44, :77:22
      end
      else if (_GEN_1) begin	// src/main/scala/npc/ifu.scala:80:17
        if (io_memory_ar_ready)	// src/main/scala/npc/ifu.scala:10:14
          state <= 3'h3;	// src/main/scala/npc/ifu.scala:54:44, :77:22
      end
      else if (_GEN_2) begin	// src/main/scala/npc/ifu.scala:80:17
        if (io_memory_r_valid)	// src/main/scala/npc/ifu.scala:10:14
          state <= 3'h4;	// src/main/scala/npc/ifu.scala:50:21, :77:22
      end
      else if (_GEN_5 & io_out_ready)	// src/main/scala/npc/ifu.scala:77:22, :80:17, :170:26, :171:15
        state <= 3'h0;	// src/main/scala/npc/ifu.scala:54:44, :77:22
    end
  end // always @(posedge)
  EBreakHandler ebreakHandler (	// src/main/scala/npc/ifu.scala:66:29
    .inst             (io_inst_debug_0),	// src/main/scala/npc/ifu.scala:80:17, :86:24
    .lsu_axi_resp_err (io_lsu_axi_resp_err)
  );
  assign io_out_valid = ~(_GEN | _GEN_0 | _GEN_1 | _GEN_2) & _GEN_5;	// src/main/scala/npc/ifu.scala:9:7, :42:16, :80:17, :85:20, :115:20, :136:20
  assign io_out_bits_inst = io_inst_debug_0;	// src/main/scala/npc/ifu.scala:9:7, :80:17, :86:24
  assign io_out_bits_pc = pc;	// src/main/scala/npc/ifu.scala:9:7, :47:19
  assign io_memory_ar_addr = _GEN_6 ? pc : 32'h0;	// src/main/scala/npc/ifu.scala:9:7, :47:19, :48:31, :80:17, :86:24, :88:25
  assign io_memory_ar_valid = ~(_GEN | _GEN_0) & _GEN_1;	// src/main/scala/common/axi4.scala:90:18, src/main/scala/npc/ifu.scala:9:7, :80:17, :89:26
  assign io_memory_r_ready = ~_GEN_4 & _GEN_2;	// src/main/scala/common/axi4.scala:98:17, src/main/scala/npc/ifu.scala:9:7, :48:31, :80:17, :95:25, :125:25
  assign io_arbiter_valid = ~_GEN & (_GEN_3 | _GEN_2);	// src/main/scala/npc/ifu.scala:9:7, :48:31, :80:17, :83:24, :104:24, :113:24
  assign io_pc_debug = pc;	// src/main/scala/npc/ifu.scala:9:7, :47:19
  assign io_inst_debug = io_inst_debug_0;	// src/main/scala/npc/ifu.scala:9:7, :80:17, :86:24
  assign io_ifu_state_debug = state;	// src/main/scala/npc/ifu.scala:9:7, :77:22
endmodule

