// Generated by CIRCT firtool-1.62.0
module EXU(	// src/main/scala/npc/exu.scala:24:7
  input         clock,	// src/main/scala/npc/exu.scala:24:7
                reset,	// src/main/scala/npc/exu.scala:24:7
  output        io_in_ready,	// src/main/scala/npc/exu.scala:25:14
  input         io_in_valid,	// src/main/scala/npc/exu.scala:25:14
  input  [31:0] io_in_bits_inst,	// src/main/scala/npc/exu.scala:25:14
                io_in_bits_pc,	// src/main/scala/npc/exu.scala:25:14
  input  [4:0]  io_in_bits_wb_addr,	// src/main/scala/npc/exu.scala:25:14
  input  [31:0] io_in_bits_alu_op1,	// src/main/scala/npc/exu.scala:25:14
                io_in_bits_alu_op2,	// src/main/scala/npc/exu.scala:25:14
                io_in_bits_rs2_data,	// src/main/scala/npc/exu.scala:25:14
  input         io_out_ready,	// src/main/scala/npc/exu.scala:25:14
  output        io_out_valid,	// src/main/scala/npc/exu.scala:25:14
  output [31:0] io_out_bits_inst,	// src/main/scala/npc/exu.scala:25:14
                io_out_bits_pc,	// src/main/scala/npc/exu.scala:25:14
                io_out_bits_dmem_addr,	// src/main/scala/npc/exu.scala:25:14
                io_out_bits_result,	// src/main/scala/npc/exu.scala:25:14
                io_out_bits_rs2_data,	// src/main/scala/npc/exu.scala:25:14
  output [4:0]  io_out_bits_wb_addr	// src/main/scala/npc/exu.scala:25:14
);

  wire [31:0]     _alu_instance_io_result;	// src/main/scala/npc/exu.scala:115:28
  reg  [1:0]      state;	// src/main/scala/npc/exu.scala:29:22
  wire            _GEN = state == 2'h0;	// src/main/scala/npc/exu.scala:29:22, :36:17
  wire            _GEN_0 = state == 2'h1;	// src/main/scala/npc/exu.scala:29:22, :36:17, :41:15
  wire            _GEN_1 = state == 2'h2;	// src/main/scala/npc/exu.scala:29:22, :36:17, :48:13
  wire            io_in_ready_0 = _GEN & io_in_valid;	// src/main/scala/npc/exu.scala:36:17, :38:25
  reg  [31:0]     exu_reg_inst;	// src/main/scala/npc/exu.scala:61:31
  reg  [31:0]     exu_reg_pc;	// src/main/scala/npc/exu.scala:62:29
  reg  [31:0]     exu_reg_rs2_data;	// src/main/scala/npc/exu.scala:63:35
  reg  [4:0]      exu_reg_wb_addr;	// src/main/scala/npc/exu.scala:64:34
  wire            _alu_op_T_24 = exu_reg_inst[31:25] == 7'h20;	// src/main/scala/npc/exu.scala:61:31, :69:28, :89:53
  wire [7:0][4:0] _GEN_2 =
    {{5'h2}, {5'h3}, {{4'h4, ~_alu_op_T_24}}, {5'h4}, {5'h6}, {5'h5}, {5'h7}, {5'h0}};	// src/main/scala/npc/exu.scala:83:47, :89:53
  wire [7:0][4:0] _GEN_3 =
    {{5'h2},
     {5'h3},
     {{4'h4, ~_alu_op_T_24}},
     {5'h4},
     {5'h6},
     {5'h5},
     {5'h7},
     {{4'h0, _alu_op_T_24}}};	// src/main/scala/npc/exu.scala:83:47, :89:53, :96:47, :97:51, :105:51
  always @(posedge clock) begin	// src/main/scala/npc/exu.scala:24:7
    if (reset)	// src/main/scala/npc/exu.scala:24:7
      state <= 2'h0;	// src/main/scala/npc/exu.scala:29:22
    else if (_GEN) begin	// src/main/scala/npc/exu.scala:36:17
      if (io_in_valid)	// src/main/scala/npc/exu.scala:25:14
        state <= 2'h1;	// src/main/scala/npc/exu.scala:29:22, :41:15
    end
    else if (_GEN_0)	// src/main/scala/npc/exu.scala:36:17
      state <= 2'h2;	// src/main/scala/npc/exu.scala:29:22, :48:13
    else if (_GEN_1 & io_out_ready)	// src/main/scala/npc/exu.scala:29:22, :36:17, :54:26, :55:15
      state <= 2'h0;	// src/main/scala/npc/exu.scala:29:22
    if (io_in_ready_0 & io_in_valid) begin	// src/main/scala/chisel3/util/Decoupled.scala:51:35, src/main/scala/npc/exu.scala:36:17, :38:25
      exu_reg_inst <= io_in_bits_inst;	// src/main/scala/npc/exu.scala:61:31
      exu_reg_pc <= io_in_bits_pc;	// src/main/scala/npc/exu.scala:62:29
      exu_reg_rs2_data <= io_in_bits_rs2_data;	// src/main/scala/npc/exu.scala:63:35
      exu_reg_wb_addr <= io_in_bits_wb_addr;	// src/main/scala/npc/exu.scala:64:34
    end
  end // always @(posedge)
  ALU alu_instance (	// src/main/scala/npc/exu.scala:115:28
    .io_a      (io_in_bits_alu_op1),
    .io_b      (io_in_bits_alu_op2),
    .io_aluOp
      (exu_reg_inst[6:0] == 7'h33
         ? _GEN_3[exu_reg_inst[14:12]]
         : exu_reg_inst[6:0] == 7'h13
             ? _GEN_2[exu_reg_inst[14:12]]
             : exu_reg_inst[6:0] == 7'h23 | exu_reg_inst[6:0] == 7'h3
               | exu_reg_inst[6:0] == 7'h17 | exu_reg_inst[6:0] != 7'h37
                 ? 5'h0
                 : 5'hF),	// src/main/scala/npc/exu.scala:61:31, :67:28, :68:28, :78:35, :83:47, :96:47
    .io_result (_alu_instance_io_result)
  );
  assign io_in_ready = io_in_ready_0;	// src/main/scala/npc/exu.scala:24:7, :36:17, :38:25
  assign io_out_valid = ~(_GEN | _GEN_0) & _GEN_1;	// src/main/scala/npc/exu.scala:24:7, :36:17, :38:25, :47:20
  assign io_out_bits_inst = exu_reg_inst;	// src/main/scala/npc/exu.scala:24:7, :61:31
  assign io_out_bits_pc = exu_reg_pc;	// src/main/scala/npc/exu.scala:24:7, :62:29
  assign io_out_bits_dmem_addr = _alu_instance_io_result;	// src/main/scala/npc/exu.scala:24:7, :115:28
  assign io_out_bits_result = _alu_instance_io_result;	// src/main/scala/npc/exu.scala:24:7, :115:28
  assign io_out_bits_rs2_data = exu_reg_rs2_data;	// src/main/scala/npc/exu.scala:24:7, :63:35
  assign io_out_bits_wb_addr = exu_reg_wb_addr;	// src/main/scala/npc/exu.scala:24:7, :64:34
endmodule

